<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using the repository &mdash; PsychoPy v3.0</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.0.0b2',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="PsychoPy v3.0" href="../index.html" />
    <link rel="up" title="For Developers" href="developers.html" />
    <link rel="next" title="Adding documentation" href="addingdocumentation.html" />
    <link rel="prev" title="For Developers" href="developers.html" /> 
  </head>
  <body>


<div id="header"  style="background-color: white">
<table width="100%" cellpadding="10">
<tr><td style="text-align:left;vertical-align:middle">
<a href='http://www.psychopy.org'><img src="../_static/psychopyDocBanner2.gif" alt="PsychoPy logo" /></a>
</td><td style="text-align:right;vertical-align:middle">
<a href='http://www.nottingham.ac.uk'><img src=../_static/UoN_Supported_RGBsm.png alt="University of Nottingham" /></a>
</td></table>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="addingdocumentation.html" title="Adding documentation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="developers.html" title="For Developers"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">PsychoPy</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="developers.html" accesskey="U">For Developers</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Using the repository</a><ul>
<li><a class="reference internal" href="#workflow">Workflow</a></li>
<li><a class="reference internal" href="#create-your-own-fork-of-the-central-repository">Create your own fork of the central repository</a></li>
<li><a class="reference internal" href="#fetch-a-local-copy">Fetch a local copy</a></li>
<li><a class="reference internal" href="#fetching-the-latest-version">Fetching the latest version</a></li>
<li><a class="reference internal" href="#run-psychopy-using-your-local-copy">Run PsychoPy using your local copy</a></li>
<li><a class="reference internal" href="#fixing-bugs-and-making-minor-improvements">Fixing bugs and making minor improvements</a></li>
<li><a class="reference internal" href="#commit-messages">Commit messages</a></li>
<li><a class="reference internal" href="#share-your-improvement-with-others">Share your improvement with others</a></li>
<li><a class="reference internal" href="#add-a-new-feature-branch">Add a new feature branch</a></li>
<li><a class="reference internal" href="#completing-work-on-a-feature">Completing work on a feature</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="developers.html"
                                  title="previous chapter">For Developers</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="addingdocumentation.html"
                                  title="next chapter">Adding documentation</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/developers/repository.rst.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>

            <h3>Quick links</h3>
            <ul>
            <li><a href="http://psychopy.org/installation.html"><strong>Download</strong></a></li>
            <li><a href="http://discourse.psychopy.org">Forum</a></li>
            <li><a href="http://twitter.com/psychopy">Twitter</a></li>
            </ul>

            <!-- facebook like -->
            <div id="fb-root"></div><script src="http://connect.facebook.net/en_US/all.js#appId=122767831154831&amp;xfbml=1"></script>
            <fb:like href="http://www.facebook.com/pages/PsychoPy/140222406067597" send="false" layout="button_count" width="300" show_faces="false" action="like" font=""></fb:like>

            <!-- google +1 -->
            <!-- Place this tag where you want the +1 button to render -->
            <g:plusone count="false" href="http://www.psychopy.org"></g:plusone>
            <!-- Place this tag after the last plusone tag -->
            <script type="text/javascript">
              window.___gcfg = {lang: 'en-GB'};
              (function() {
                var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
                po.src = 'https://apis.google.com/js/plusone.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
              })();
            </script>

          <div id="searchbox" style="display: none">
            <h3>Searches</h3>
            <form action="http://www.google.com/cse" id="cse-search-box">
                <input type="hidden" name="cx" value="partner-pub-0861691574026297:eyw5n7-ugep" />
                <input type="hidden" name="ie" value="ISO-8859-1" />
                <input type="text" name="q" size="20" />
                <input type="submit" name="sa" value="Go" />
            </form>
              <p class="searchtip" style="font-size: 90%">
              General
              </p>
            <script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en"></script>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Docs only
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-the-repository">
<span id="usingrepos"></span><h1>Using the repository<a class="headerlink" href="#using-the-repository" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Much of the following is explained with more detail in the <a class="reference external" href="http://nipy.sourceforge.net/nitime/devel/git_development.html">nitime documentation</a>,
and then in further detail in numerous online tutorials.</p>
</div>
<div class="section" id="workflow">
<h2>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<p>The use of git and the following workflow allows people to contribute changes that can easily be incorporated back into the project, while (hopefully) maintaining order and consistency in the code. All changes should be tracked and reversible.</p>
<blockquote>
<div><ul class="simple">
<li>Create a fork of the central psychopy/psychopy repository</li>
<li>Create a local clone of that fork</li>
<li><dl class="first docutils">
<dt>For small changes</dt>
<dd><ul class="first last">
<li>make the changes directly in the master branch</li>
<li>push back to your fork</li>
<li>submit a pull request to the central repository</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>For substantial changes (new features)</dt>
<dd><ul class="first last">
<li>create a branch</li>
<li>when finished run unit tests</li>
<li>when the unit tests pass merge changes back into the <cite>master</cite> branch</li>
<li>submit a pull request to the central repository</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="create-your-own-fork-of-the-central-repository">
<h2>Create your own fork of the central repository<a class="headerlink" href="#create-your-own-fork-of-the-central-repository" title="Permalink to this headline">¶</a></h2>
<p>Go to <a class="reference external" href="http://www.github.com">github</a>, create an account and make a fork of the <a class="reference external" href="https://github.com/psychopy/psychopy">psychopy repository</a>
You can change your fork in any way you choose without it affecting the central project. You can also share your fork with others, including the central project.</p>
</div>
<div class="section" id="fetch-a-local-copy">
<h2>Fetch a local copy<a class="headerlink" href="#fetch-a-local-copy" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://book.git-scm.com/2_installing_git.html">Install git on your computer</a>.
Create and upload an ssh key to your github account - this is necessary for you to push changes back to your fork of the project at github.</p>
<p>Then, in a folder of your choosing fetch your fork:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone git@github.com:USER/psychopy.git
$ cd psychopy
$ git remote add upstream git://github.com/psychopy/psychopy.git
</pre></div>
</div>
<p>The last line connects your copy (with read access) to the central server so you can easily fetch any updates to the central repository.</p>
</div>
<div class="section" id="fetching-the-latest-version">
<h2>Fetching the latest version<a class="headerlink" href="#fetching-the-latest-version" title="Permalink to this headline">¶</a></h2>
<p>Periodically it’s worth fetching any changes to the central psychopy repository (into your <cite>master</cite> branch, more on that below):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout master
$ git pull upstream master  # here &#39;master&#39; is the desired branch of psychopy to fetch
</pre></div>
</div>
</div>
<div class="section" id="run-psychopy-using-your-local-copy">
<h2>Run PsychoPy using your local copy<a class="headerlink" href="#run-psychopy-using-your-local-copy" title="Permalink to this headline">¶</a></h2>
<p>Now that you’ve fetched the latest version of psychopy using git, you should run this version in order to try out yours/others latest improvements. See <a class="reference external" href="http://www.ehow.com/how_8510325_set-python-path.html">this guide</a> on how to permanently run your git version of psychopy instead of the version you previously installed.</p>
<p><em>Run git version for just one session (Linux and Mac only)</em>:
If you want to switch between the latest-and-greatest development version from git and the stable version installed on your system, you can choose to only temporarily run the git version. Open a terminal and set a temporary python path to your psychopy git folder:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ export PYTHONPATH=/path/to/local/git/folder/
</pre></div>
</div>
<p>To check that worked you should open python in the terminal and try to import psychopy:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python
Python 2.7.6 (default, Mar 22 2014, 22:59:56)
[GCC 4.8.2] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import psychopy
</pre></div>
</div>
<p>PsychoPy depends on a lot of other packages and you may get a variety of failures to import them until you have them all installed in your custom environment!</p>
</div>
<div class="section" id="fixing-bugs-and-making-minor-improvements">
<h2>Fixing bugs and making minor improvements<a class="headerlink" href="#fixing-bugs-and-making-minor-improvements" title="Permalink to this headline">¶</a></h2>
<p>You can make minor changes directly in the <cite>master</cite> branch of your fork. After making a change you need to <cite>commit</cite> a set of changes to your files with a message. This enables you to group together changes and you will subsequently be able to go back to any previous <cite>commit</cite>, so your changes are reversible.</p>
<p>I (Jon) usually do this by opening the graphical user interface that comes with git:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git gui
</pre></div>
</div>
<p>From the GUI you can select (or <cite>stage</cite> in git terminology) the files that you want to include in this particular <cite>commit</cite> and give it a message. Give a clear summary of the changes for the first line. You can add more details about the changes on lower lines if needed.</p>
<p>If you have internet access then you could also push your changes back up to your fork (which is called your <cite>origin</cite> by default), either by pressing the <cite>push</cite> button in the GUI or by closing that and typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git push
</pre></div>
</div>
</div>
<div class="section" id="commit-messages">
<h2>Commit messages<a class="headerlink" href="#commit-messages" title="Permalink to this headline">¶</a></h2>
<p>Informative commit messages are really useful when we have to go back through the repository finding the time that a particular change to the code occurred. Precede your message with one or more of the following to help us spot easily if this is a bug fix (which might need pulling into other development branches) or new feature (which we might want to avoid pulling in if it might disrupt existing code).</p>
<blockquote>
<div><ul class="simple">
<li><em>BF</em> : bug fix</li>
<li><em>FF</em> : ‘feature’ fix. This is for fixes to code that hasn’t been released</li>
<li><em>RF</em> : refactoring</li>
<li><em>NF</em> : new feature</li>
<li><em>ENH</em> : enhancement (improvement to existing code)</li>
<li><em>DOC</em>: for all kinds of documentation related commits</li>
<li><em>TEST</em>: for adding or changing tests</li>
</ul>
</div></blockquote>
<p>NB: The difference between BF and FF is that BF indicates a fix that is appropriate for back-porting to earlier versions, whereas FF indicates a fix to code that has not been released, and so cannot be back-ported.</p>
</div>
<div class="section" id="share-your-improvement-with-others">
<span id="pullrequest"></span><h2>Share your improvement with others<a class="headerlink" href="#share-your-improvement-with-others" title="Permalink to this headline">¶</a></h2>
<p>Only a couple of people have direct write-access to the psychopy repository, but you can get your changes included in <cite>upstream</cite> by pushing your changes back to your github fork and then <a class="reference external" href="http://nipy.sourceforge.net/nitime/devel/development_workflow.html#asking-for-your-changes-to-be-merged-with-the-main-repo">submitting a pull request</a>. Communication is good, and hopefully you have already been in touch (via the user or dev lists) about your changes.</p>
<p>When adding an improvement or new feature, consider how it might impact others. Is it likely to be generally useful, or is it something that only you or your lab would need? (It’s fun to contribute, but consider: does it actually need to be part of PsychoPy?) Including more features has a downside in terms of complexity and bloat, so try to be sure that there is a “business case” for including it. If there is, try at all times to be backwards compatible, e.g., by adding a new keyword argument to a method or function (not always possible). If it’s not possible, it’s crucial to get wider input about the possible impacts. Flag situations that would break existing user scripts in your commit messages.</p>
<p>Part of sharing your code means making things sensible to others, which includes good coding style and writing some documentation. You are the expert on your feature, and so are in the best position to elaborate nuances or gotchas. Use meaningful variable names, and include comments in the code to explain non-trivial things, especially the intention behind specific choices. Include or edit the appropriate doc-string, because these are automatically turned into API documentation (via sphinx). Include doc-tests if that would be meaningful. The existing code base has a comment / code ratio of about 28%, which earns it high marks.</p>
<p>For larger changes and especially new features, you might need to create some usage examples, such as a new Coder demo, or even a Builder demo. These can be invaluable for being a starting point from which people can adapt things to the needs of their own situation. This is a good place to elaborate usage-related gotchas.</p>
<p>In terms of style, try to make your code blend in with and look like the existing code (e.g., using about the same level of comments, use camelCase for var names, despite the conflict with the usual PEP – we’ll eventually move to the underscore style, but for now keep everything consistent within the code base). In your own code, write however you like of course. This is just about when contributing to the project.</p>
</div>
<div class="section" id="add-a-new-feature-branch">
<span id="addfeaturebranch"></span><h2>Add a new feature branch<a class="headerlink" href="#add-a-new-feature-branch" title="Permalink to this headline">¶</a></h2>
<p>For more substantial work, you should create a new branch in your repository. Often while working on a new feature other aspects of the code will get broken and the <cite>master</cite> branch should always be in a working state. To create a new branch:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git branch feature-somethingNew
</pre></div>
</div>
<p>You can now switch to your new feature branch with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout feature-somethingNew
</pre></div>
</div>
<p>And get back to your <cite>master</cite> branch with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout master
</pre></div>
</div>
<p>You can push your new branch back to your fork (<cite>origin</cite>) with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git push origin feature-somethingNew
</pre></div>
</div>
</div>
<div class="section" id="completing-work-on-a-feature">
<h2>Completing work on a feature<a class="headerlink" href="#completing-work-on-a-feature" title="Permalink to this headline">¶</a></h2>
<p>When you’re done run the unit tests for your feature branch. Set the <cite>debug</cite> preference setting (in the app section) to True, and restart psychopy. This will enable access to the test-suite. In debug mode, from the Coder (not Builder) you can now do Ctrl-T / Cmd-T (see Tools menu, Unit Testing) to bring up the unit test window. You can select a subset of tests to run, or run them all.</p>
<p>It’s also possible to run just selected tests, such as doctests within a single file. From a terminal window:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">psychopy</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span>  <span class="c1">#eg /Users/jgray/code/psychopy/psychopy/tests</span>
<span class="o">./</span><span class="n">run</span><span class="o">.</span><span class="n">py</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">file_with_doctests</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>If the tests pass you hopefully haven’t damaged other parts of PsychoPy (!?). If possible add a unit test for your new feature too, so that if other people make changes they don’t break your work!</p>
<p>You can merge your changes back into your master branch with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git checkout master
$ git merge feature-somethingNew
</pre></div>
</div>
<p>Merge conflicts happen, and need to be resolved.  If you configure your git preferences (~/.gitconfig) to include:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">merge</span><span class="p">]</span>
    <span class="n">summary</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">tool</span> <span class="o">=</span> <span class="n">opendiff</span>
</pre></div>
</div>
<p>then you’ll be able to use a handy GUI interface (opendiff) for reviewing differences and conflicts, just by typing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">mergetool</span>
</pre></div>
</div>
<p>from the command line after hitting a merge conflict (such as during a <cite>git pull upstream master</cite>).</p>
<p>Once you’ve folded your new code back into your master and pushed it back to your github fork then it’s time to <a class="reference internal" href="#pullrequest"><span class="std std-ref">Share your improvement with others</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="addingdocumentation.html" title="Adding documentation"
             >next</a> |</li>
        <li class="right" >
          <a href="developers.html" title="For Developers"
             >previous</a> |</li>
        <li><a href="../index.html">PsychoPy</a> &raquo;</li>
          <li><a href="../documentation.html" >Documentation</a> &raquo;</li>
          <li><a href="developers.html" >For Developers</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2018, Jonathan Peirce.
      Last updated on Jul 25, 2018.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.7.0.
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-4089651-2', 'auto');
      ga('send', 'pageview');

    </script>

    <script type="text/javascript" src="http://www.ohloh.net/p/17081/widgets/project_partner_badge.js"></script>
    </div>
  </body>
</html>